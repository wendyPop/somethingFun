<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <canvas id="canvas" width="300" height="300"></canvas>

    <!-- npm 설치한 것 처럼 효과를 주는 라이브러리 설치법 -->
    <script type="importmap">
	  {
		"imports": {
         "three": "https://unpkg.com/three@0.141.0/build/three.module.js",
         "GLTFLoader" : "https://unpkg.com/three@0.141.0/examples/jsm/loaders/GLTFLoader.js"
        }
	  }
    </script>

    <script type="module">
        import { GLTFLoader } from 'GLTFLoader'
        import * as THREE from 'three';


		// 1. 장면 만들고 (도화지 생성)
        // 2. 브라우저에 랜더링


		let scene = new THREE.Scene()
        // scene.add(정육면체) -> 이런식으로 scene 에다가 그림을 그린다.

        let renderer = new THREE.WebGLRenderer({
          canvas: document.querySelector('#canvas'),
          antialias : true  // 표면 부드럽게
        })
        // 강아지 색상을 똥개에서 예쁜 색상으로 변경
        renderer.outputEncoding = THREE.sRGBEncoding;

		// 3D 모델 보여줄때 필요한 것들
		// 1. 카메라, 2.조명, 3.배경

        // 3D 모델의 핵심 : 카메라 가져오기
        /*카메라의 종류 2가지
        perspectiveCamera (원근법 있는 카메라)
        OrthographicCamera (원근법 개무시 카메라)*/
        let camera = new THREE.PerspectiveCamera(30, 1);
        // 카메라 위치 조절 (x, y, z)
        camera.position.set(0, 0, 5)

		// 조명
        // 조명의 종류도 다양하다. AmbientLight, PointLight, DirectionalLight
		let light = new THREE.DirectionalLight(0xffff00, 10);
		scene.add(light);

		// 배경
		scene.background = new THREE.Color('white');

        // gltf 형식 파일을 가져다 쓰는 방법
        let loader = new GLTFLoader();
		loader.load('./shiba/scene.gltf', function (gltf){
		  scene.add(gltf.scene);

		  // 회전 애니메이션 넣기
          function animate() {
			// 1초에 60번 정도 적용됨
            requestAnimationFrame(animate)
            gltf.scene.rotation.y -= 0.1
            gltf.scene.rotation.x -= 0.01
            renderer.render(scene, camera)
          }
		  // three.js 내의 OrbitControl 로 마우스 컨트롤되는 애니메이션 넣을수도 있다.

		  animate()
		})




    </script>
</body>
</html>
